!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("prop-types"),require("react-dom"),require("react-transition-group")):"function"==typeof define&&define.amd?define(["exports","react","prop-types","react-dom","react-transition-group"],e):e(t.ReactAlert={},t.React,t.PropTypes,t.ReactDOM,t.ReactTransitionGroup)}(this,function(t,e,n,o,r){"use strict";var i="default"in e?e.default:e;n=n&&n.hasOwnProperty("default")?n.default:n,o=o&&o.hasOwnProperty("default")?o.default:o;var a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},u=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},c=function(t,e){var n={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},p=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},f=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},d=function t(e){var n=this;a(this,t),this.show=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={id:(new Date).getTime(),message:t,options:l({},n.defaultOptions,e)};return o.close=function(){return n.remove(o)},o.options.timeout&&setTimeout(function(){n.remove(o)},o.options.timeout),n.alerts.push(o),n._broadcastToFirstListner(),o.options.onOpen&&o.options.onOpen(),o},this.remove=function(t){var e=n.alerts.length;n.alerts=n.alerts.filter(function(e){return e.id!==t.id}),e>n.alerts.length&&(n._broadcastToFirstListner(),t.options.onClose&&t.options.onClose())},this.success=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.type="success",n.show(t,e)},this.error=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.type="error",n.show(t,e)},this.info=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.type="info",n.show(t,e)},this._getAlerts=function(){return n.alerts},this._broadcastToFirstListner=function(){n.listners.length&&n.listners[0](n.alerts)},this._subscribe=function(t){n.listners.push(t)},this._unsubscribe=function(t){n.listners=n.listners.filter(function(e){return e!==t})},this.defaultOptions=e,this.listners=[],this.alerts=[]},h=function(t){u(e,t);function e(){var t,n,o;a(this,e);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=o=p(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(i))),o.alertContainer=new d(o.props.options),p(o,n)}return s(e,[{key:"getChildContext",value:function(){var t=this.props,e=t.alertRoot,n=t.alertTemplate,o=t.options;return{alertContainer:this.alertContainer,alertRoot:e,alertTemplate:n,options:o}}},{key:"render",value:function(){return this.props.children}}]),e}(e.Component);h.displayName="AlertsBroadcast",h.propTypes={alertRoot:n.object.isRequired,alertTemplate:n.oneOfType([n.element,n.func]).isRequired,options:n.object.isRequired},h.childContextTypes={alertContainer:n.object.isRequired,alertRoot:n.object.isRequired,alertTemplate:n.oneOfType([n.element,n.func]).isRequired,options:n.object.isRequired};var m=function(t){u(e,t);function e(){var t,n,o;a(this,e);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=o=p(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(i))),o.state={isClient:!1},o.alertRootElement=null,p(o,n)}return s(e,[{key:"componentDidMount",value:function(){this.setState({isClient:!0})}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.alertRootElement),this.alertRootElement=null}},{key:"render",value:function(){if(!this.state.isClient)return null;this.alertRootElement||(this.alertRootElement=document.createElement("div"),document.body.appendChild(this.alertRootElement));var t=this.props,e=t.children,n=t.template,o=t.offset,r=t.position,a=t.timeout,s=t.type,l=t.transition,u=t.zIndex;return i.createElement(h,{alertRoot:this.alertRootElement,alertTemplate:n,options:{offset:o,position:r,timeout:a,type:s,transition:l,zIndex:u}},e)}}]),e}(e.Component);m.propTypes={offset:n.string,position:n.oneOf(["top left","top right","top center","bottom left","bottom right","bottom center"]),timeout:n.number,type:n.oneOf(["info","success","error"]),transition:n.oneOf(["fade","scale"]),zIndex:n.number,template:n.oneOfType([n.element,n.func]).isRequired},m.defaultProps={offset:"10px",position:"top center",timeout:0,type:"info",transition:"fade",zIndex:100};var y=function(t){u(e,t);function e(){return a(this,e),p(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,[{key:"render",value:function(){var t=this.props,e=t.children,n=c(t,["children"]),o=(n.offset,n.position,n.timeout,n.type,n.transition,n.zIndex,c(n,["offset","position","timeout","type","transition","zIndex"]));return i.createElement("div",l({style:function(t){var e=t.position,n=t.zIndex;switch(e){case"top left":return{position:"fixed",top:0,right:"auto",bottom:"auto",left:0,zIndex:n};case"top right":return{position:"fixed",top:0,right:0,bottom:"auto",left:"auto",zIndex:n};case"bottom left":return{position:"fixed",top:"auto",right:"auto",bottom:0,left:0,zIndex:n};case"bottom right":return{position:"fixed",top:"auto",right:0,bottom:0,left:"auto",zIndex:n};case"top center":return{position:"fixed",top:0,right:"auto",bottom:"auto",left:"50%",transform:"translate(-50%, 0%)",zIndex:n};case"bottom center":return{position:"fixed",top:"auto",right:"auto",bottom:0,left:"50%",transform:"translate(-50%, 0%)",zIndex:n}}}(n)},o),e)}}]),e}(e.Component),v={fade:{transition:"opacity 250ms ease",opacity:0},scale:{transform:"scale(1)",transition:"all 250ms ease-in-out"}},b={fade:{entering:{opacity:0},entered:{opacity:1}},scale:{entering:{transform:"scale(0)"},entered:{transform:"scale(1)"},exiting:{transform:"scale(0)"},exited:{transform:"scale(1)"}}},g=function(t){var e=t.children,n=t.type,o=c(t,["children","type"]);return i.createElement(r.Transition,l({},o,{timeout:250}),function(t){return i.createElement("div",{style:l({},v[n],b[n][t])},e)})};t.Provider=m,t.withAlert=function(t){var c=function(n){u(c,n);function c(){var t,e,n;a(this,c);for(var o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];return e=n=p(this,(t=c.__proto__||Object.getPrototypeOf(c)).call.apply(t,[this].concat(r))),n.state={alerts:[]},n.syncAlerts=function(t){n.setState({alerts:[].concat(f(t))})},p(n,e)}return s(c,[{key:"componentWillMount",value:function(){this.setState({alerts:[].concat(f(this.context.alertContainer._getAlerts()))})}},{key:"componentDidMount",value:function(){this.context.alertContainer._subscribe(this.syncAlerts)}},{key:"componentWillUnmount",value:function(){this.context.alertContainer._unsubscribe(this.syncAlerts)}},{key:"render",value:function(){var n=this.context,a=n.alertContainer,s=n.alertTemplate,u=n.alertRoot,c=n.options;return i.createElement(e.Fragment,null,i.createElement(t,l({},this.props,{alert:a})),o.createPortal(i.createElement(y,c,i.createElement(r.TransitionGroup,null,this.state.alerts.map(function(t){return i.createElement(g,{type:c.transition,key:t.id},i.createElement(s,l({style:{margin:c.offset}},t)))}))),u))}}]),c}(e.Component);return c.displayName="WithAlert("+(t.displayName||t.name||"Component")+")",c.contextTypes={alertContainer:n.object.isRequired,alertRoot:n.object.isRequired,alertTemplate:n.oneOfType([n.element,n.func]).isRequired,options:n.object.isRequired},c},Object.defineProperty(t,"__esModule",{value:!0})});
